# ผู้จัดการ (Manager) – คู่มือการใช้งาน

## ภาพรวมบทบาท
ผู้จัดการรับผิดชอบอนุมัติคำขอจองรถ กำหนดผู้อนุมัติแทน และติดตามการใช้งานของทีมได้จากแดชบอร์ดแบบเรียลไทม์ซึ่งแสดงสถานะคิวอนุมัติ เวลาตอบสนอง และสถิติการใช้ทรัพยากรในทีม.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L38-L197】

## การจัดการคำขอ
1. เข้าสู่หน้า **“คิวคำขอที่ต้องอนุมัติ”** เพื่อดูคำขอที่รอดำเนินการ พร้อมเวลาและผู้ร้องขอในรูปแบบไทม์ไลน์.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L109-L126】
2. ใช้ปุ่มด่วน “ตรวจสอบคำขอทั้งหมด” หรือเปิดโมดูลอนุมัติในเมนู `/approvals` เพื่อเรียก API `/api/v1/bookings` ซึ่งรองรับการค้นหา/กรองตามสถานะ ผู้ร้องขอ แผนก และช่วงเวลา.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L164-L197】【F:backend/app/api/api_v1/endpoints/bookings.py†L118-L152】
3. เมื่อตัดสินใจอนุมัติหรือปฏิเสธ ใช้เอ็นด์พอยต์ `/api/v1/bookings/{id}/approve` หรือ `/reject` เพื่อบันทึกผล พร้อมบันทึกเหตุผลและสร้างการแจ้งเตือนให้ผู้ร้องอัตโนมัติ.【F:backend/app/api/api_v1/endpoints/bookings.py†L304-L343】
4. หากคำขอต้องการข้อมูลเพิ่มเติม เปลี่ยนสถานะผ่าน `/api/v1/bookings/{id}/status` เพื่อให้ผู้ร้องแก้ไขหรือยกเลิกได้เอง โดยระบบจำกัดสิทธิ์ให้เฉพาะผู้จัดการ/ผู้ดูแลเท่านั้น.【F:backend/app/api/api_v1/endpoints/bookings.py†L257-L301】

## การติดตามการใช้งานทีม
- แดชบอร์ดแสดงสถิติที่สำคัญ เช่น จำนวนคำขอรออนุมัติ งานที่เสร็จสิ้น และเวลาตอบสนองเฉลี่ย เพื่อช่วยกำกับ SLA.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L76-L107】
- ตาราง “ภาพรวมทีมงาน” แสดงปริมาณงานที่เสร็จสิ้น อัตราการใช้งาน และงานล่วงหน้าของแต่ละสมาชิก ช่วยวางแผนการจัดสรรทรัพยากรล่วงหน้า.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L128-L160】
- ปุ่มด่วน “สถิติการใช้ทีม” และ “รายการติดตาม” เชื่อมไปยังหน้ารายงานเชิงลึกสำหรับการวิเคราะห์แนวโน้มและการติดตามคำขอที่ค้างข้อมูล.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L164-L197】

## การมอบหมายสิทธิ์แทน (Delegation)
- ใช้ปุ่ม **“ตั้งค่าผู้อนุมัติแทน”** เพื่อกำหนดช่วงเวลาที่ผู้จัดการคนอื่นสามารถอนุมัติแทนได้ (เช่น ระหว่างการลาพักร้อน).【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L169-L197】
- การกำหนดดังกล่าวแมปกับ `approval_delegations` ในระบบและสามารถเรียกดู/ปรับปรุงผ่าน API `/api/v1/bookings/delegations` (หากเปิดใช้งานในอนาคต) เพื่อควบคุมการมอบหมายตามแผนก.【F:backend/app/models/approval.py†L63-L91】

## แนวทางปฏิบัติที่ดี
- ตรวจสอบคำขออย่างน้อยวันละสองครั้งเพื่อป้องกันการสะสม backlog และรักษา SLA เวลาตอบสนองที่แสดงในแดชบอร์ด.【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L76-L107】
- ใช้รายงานทีมในการประชุมประจำสัปดาห์เพื่อติดตามความถี่การใช้งานและระบุปัญหาซ้ำ (เช่น ทีมที่ร้องขอบ่อยหรือการเดินทางที่ต้องการรถเฉพาะ).【F:frontend/src/components/dashboard/ManagerDashboard.tsx†L128-L197】
