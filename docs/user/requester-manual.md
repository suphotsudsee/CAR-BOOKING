# ผู้ขอใช้รถ (Requester) – คู่มือการใช้งาน

## ภาพรวมบทบาท
ผู้ขอใช้รถสามารถสร้างและติดตามคำขอเดินทางสำหรับตนเอง ตรวจสอบสถานะการอนุมัติ และเข้าถึงคู่มือหรือปฏิทินเพื่อวางแผนการเดินทางล่วงหน้าได้โดยตรงจากแดชบอร์ด.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L31-L153】

## ขั้นตอนเริ่มต้น
1. เข้าสู่ระบบที่ `/login` ด้วยบัญชีผู้ใช้หรืออีเมลองค์กรและเลือกระยะเวลาจดจำการเข้าสู่ระบบตามต้องการ.【F:frontend/src/app/login/page.tsx†L21-L148】
2. เมื่อล็อกอินสำเร็จ ระบบจะนำไปยังหน้าโปรไฟล์และแดชบอร์ดผู้ขอใช้รถที่แสดงภาพรวมสถานะคำขอและการใช้งานล่าสุด.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L60-L153】

## การสร้างคำขอจองรถ
1. กดปุ่ม **“สร้างคำขอจองรถ”** ในส่วน “การดำเนินการด่วน” เพื่อเปิดแบบฟอร์มใหม่.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L92-L125】
2. กรอกวัตถุประสงค์ การเดินทาง จุดรับ-ส่ง จำนวนผู้โดยสาร และความต้องการพิเศษ ก่อนบันทึกระบบจะบังคับไม่ให้เลือกผู้ร้องคนอื่นเว้นแต่เป็นบทบาทผู้จัดการ/ผู้ดูแล.【F:backend/app/api/api_v1/endpoints/bookings.py†L86-L116】
3. เมื่อบันทึกสำเร็จ คำขอจะอยู่ในสถานะ `REQUESTED` และส่งเข้าเวิร์กโฟลว์การอนุมัติอัตโนมัติ พร้อมแจ้งเตือนให้ผู้เกี่ยวข้อง.【F:backend/app/api/api_v1/endpoints/bookings.py†L257-L341】

## ติดตามและจัดการคำขอ
- ใช้ตาราง “ประวัติการจองล่าสุด” เพื่อตรวจสอบหมายเลขคำขอ รถที่ใช้ ช่วงเวลา และสถานะล่าสุดอย่างรวดเร็ว.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L128-L153】
- หากต้องการดูคำขอทั้งหมดหรือค้นหาย้อนหลัง ให้เรียก API `/api/v1/bookings/me` ซึ่งรองรับตัวกรองสถานะ คำค้นหา และช่วงเวลา.【F:backend/app/api/api_v1/endpoints/bookings.py†L155-L183】
- ผู้ขอใช้รถสามารถแก้ไขรายละเอียดก่อนอนุมัติหรือยกเลิกคำขอด้วยตนเองผ่านจุดบริการเดียวกัน โดยระบบจะตรวจสอบสิทธิ์และสถานะให้อัตโนมัติ.【F:backend/app/api/api_v1/endpoints/bookings.py†L202-L301】

## ฟังก์ชันเสริม
- **จองรถแบบด่วน:** แสดงรถที่ว่างภายใน 24 ชั่วโมงถัดไปเพื่อการเดินทางฉุกเฉิน.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L97-L110】
- **ดูปฏิทินการใช้งาน:** ตรวจสอบความหนาแน่นของทรัพยากรในทีมเพื่อหลีกเลี่ยงการชนกับคำขออื่น.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L111-L117】
- **คู่มือและนโยบาย:** เข้าถึงเอกสารข้อกำหนดการใช้รถและแนวปฏิบัติได้จากลิงก์เดียว.【F:frontend/src/components/dashboard/RequesterDashboard.tsx†L118-L124】

## แนวทางปฏิบัติที่ดี
- สร้างคำขอล่วงหน้าอย่างน้อย 4 ชั่วโมงตามข้อกำหนดระบบ (`booking_lead_time_hours`) เพื่อลดการถูกปฏิเสธอัตโนมัติ.【F:backend/app/models/system.py†L14-L58】
- ตรวจสอบการแจ้งเตือนในระบบและอีเมลเพื่อทราบผลอนุมัติหรือคำขอข้อมูลเพิ่มเติมจากผู้จัดการ.【F:backend/app/api/api_v1/endpoints/bookings.py†L58-L83】【F:backend/app/models/notification.py†L1-L48】
