# คนขับ (Driver) – คู่มือการใช้งาน

## ภาพรวมบทบาท
แดชบอร์ดคนขับเน้นภารกิจประจำวันที่ได้รับมอบหมาย พร้อมเครื่องมือเช็กอิน/เช็กเอาต์ ติดตามตำแหน่ง GPS และอัปโหลดหลักฐานภาพถ่ายหรือใบเสร็จได้จากอุปกรณ์พกพา.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L52-L212】

## การเตรียมพร้อมก่อนออกเดินทาง
1. ตรวจสอบ “งานวันนี้” และ “งานที่เสร็จสิ้น” ในส่วนสถิติ เพื่อทราบปริมาณงานที่ต้องดำเนินการและผลลัพธ์ที่ผ่านมา.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L182-L211】
2. รายการ “งานที่ได้รับมอบหมาย” แสดงปลายทาง เวลานัดหมาย และผู้ร้องขอในแต่ละงาน จัดลำดับความสำคัญให้เรียบร้อยก่อนเริ่มเดินทาง.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L74-L99】

## การเช็กอิน/เช็กเอาต์
1. กดปุ่ม **เช็กอิน** เพื่อบันทึกเวลา ตำแหน่ง GPS และถ่ายภาพยืนยันสภาพรถก่อนออกเดินทาง ระบบจะเริ่มติดตามเส้นทางอัตโนมัติ.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L101-L131】
2. เมื่อจบงาน กด **เช็กเอาต์** เพื่อหยุดการติดตาม บันทึกตำแหน่งและรูปภาพหลังปฏิบัติงาน พร้อมบันทึกรายการใน “สถานะการปฏิบัติงาน”.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L132-L219】
3. ข้อมูลเช็กอิน/เช็กเอาต์ถูกส่งไปยัง API `/api/v1/job-runs/by-booking/{id}/check-in|check-out` ซึ่งตรวจสอบสิทธิ์คนขับและสถานะงานก่อนบันทึกอย่างเคร่งครัด.【F:backend/app/api/api_v1/endpoints/job_runs.py†L200-L258】

## การจัดการหลักฐานและค่าใช้จ่าย
- ใช้เครื่องมือถ่ายภาพในแอปเพื่อเก็บภาพสภาพรถหรือใบเสร็จ ระบบจำกัดให้เก็บรายการล่าสุด 6 รายการเพื่อความรวดเร็ว.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L163-L169】
- อัปโหลดใบเสร็จค่าใช้จ่ายผ่าน API `/api/v1/job-runs/by-booking/{id}/expenses/receipts` ซึ่งตรวจสอบขนาดไฟล์และนามสกุลตามนโยบายระบบ ก่อนแนบเข้ากับรายการงาน.【F:backend/app/api/api_v1/endpoints/job_runs.py†L145-L197】

## ติดตามตำแหน่งและบันทึกการเดินทาง
- วิดเจ็ต Location Tracker แสดงสถานะการติดตาม ความแม่นยำ สถิติระยะทาง และข้อเสนอแนะเพื่อช่วยให้ GPS ทำงานได้ดีขึ้น.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L59-L180】
- ผู้ดูแลและผู้จัดการสามารถเข้าถึงเส้นทางและบันทึกทั้งหมดผ่านเอ็นด์พอยต์ job run เพื่อวิเคราะห์ประสิทธิภาพหรือยืนยันการปฏิบัติงาน.【F:backend/app/api/api_v1/endpoints/job_runs.py†L48-L143】

## แนวทางปฏิบัติที่ดี
- เริ่มเช็กอินก่อนออกเดินทางทุกครั้งเพื่อให้ระบบบันทึกเส้นทางครบถ้วนและยืนยันการรับงานอย่างเป็นทางการ.【F:backend/app/api/api_v1/endpoints/job_runs.py†L200-L230】
- หากพบปัญหาการติดตามตำแหน่ง ตรวจสอบสถานะแสดงผลในแดชบอร์ดและให้เริ่ม/หยุดการติดตามใหม่เพื่อรีเซ็ตเซสชัน.【F:frontend/src/components/dashboard/DriverDashboard.tsx†L59-L180】
- ส่งมอบใบเสร็จและรายงานค่าใช้จ่ายทันทีหลังจบงาน เพื่อให้ผู้จัดการตรวจสอบและอนุมัติได้รวดเร็ว.【F:backend/app/api/api_v1/endpoints/job_runs.py†L145-L294】
